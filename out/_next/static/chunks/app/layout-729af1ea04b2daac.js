(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{6108:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9324,23)),Promise.resolve().then(r.bind(r,5459))},5459:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>s});var a=r(5155),o=r(2115);let i=(0,o.createContext)(void 0);function s(e){let{children:t}=e,[r,s]=(0,o.useState)(null),[n,l]=(0,o.useState)(!0);(0,o.useEffect)(()=>{c()},[]);let c=async()=>{try{let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);t&&t.id&&t.email?s(t):localStorage.removeItem("user")}}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("user")}finally{l(!1)}},u=async(e,t)=>{l(!0);try{let r=await fetch("/api/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),a=await r.json();if(!r.ok)throw Error(a.message||"Sign in failed");s(a.user),localStorage.setItem("user",JSON.stringify(a.user))}catch(e){if(e instanceof Error)throw Error(e.message);throw Error("Sign in failed")}finally{l(!1)}},h=async(e,t,r)=>{l(!0);try{let a=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,...r})}),o=await a.json();if(!a.ok)throw Error(o.message||"Sign up failed");s(o.user),localStorage.setItem("user",JSON.stringify(o.user))}catch(e){if(e instanceof Error)throw Error(e.message);throw Error("Sign up failed")}finally{l(!1)}},f=async()=>{try{await fetch("/api/auth/signout",{method:"POST"}),s(null),localStorage.removeItem("user")}catch(e){console.error("Sign out failed:",e)}};return(0,a.jsx)(i.Provider,{value:{user:r,loading:n,signIn:u,signUp:h,signOut:f,isAuthenticated:!!r},children:!n&&t})}},9324:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[533,441,517,358],()=>t(6108)),_N_E=e.O()}]);